# Instructions for Agents

This repository contains Dev Container Features.

## Project Structure
- `src/`: Contains the source code for the features. Each feature has its own directory (e.g., `src/codex`, `src/opencode`).
  - `install.sh`: The installation script for the feature.
  - `devcontainer-feature.json`: The metadata for the feature.
- `test/`: Contains tests for the features.
  - `test/<feature>/test.sh`: Basic test script.
  - `test/<feature>/scenarios.json`: Test scenarios configuration.

## Working on Features
- When modifying a feature, update `src/<feature>/install.sh` or `devcontainer-feature.json`.
- Ensure that the `install.sh` script is idempotent and handles different inputs correctly.

## Testing
- Tests are run using the `@devcontainers/cli`.
- In CI, the tests are run as follows:
  - Autogenerated tests: `devcontainer features test --skip-scenarios -f <feature> -i <baseImage> .`
  - Scenario tests: `devcontainer features test -f <feature> --skip-autogenerated --skip-duplicated .`
- If you have access to the `devcontainer` CLI, you should run these tests locally before submitting changes.
- If you do not have `devcontainer` CLI installed, you can try to install it using `npm install -g @devcontainers/cli` (may require root).
- If you need to add a new test case, add it to `test/<feature>/` as a shell script and update `scenarios.json` if necessary.

## Pre-commit
- Review your changes.
- Ensure all relevant tests pass.
